%!TEX root = popl2018.tex

\section{Conclusion}

In this paper, we investigate extensively the decidability boundary of the satisfiability problem of the string constraints involving the $\replaceall$ function and regular constraints. We considered the $\replaceall$ function in its general form, that is, $\replaceall(x, e, y)$, where $x,y$ are string constants/variables, and $e$ is a string constant/variable, or a regular expression. Since the satisfiability problem is undecidable in general, we focused on the straight-line fragment. We showed that while it is still undecidable if the second parameters of the $\replaceall$ function are allowed to be variables, it is decidable, more precisely in EXPSPACE, if the second parameters are regular expressions. The decision procedure was obtained by a neat automata construction, is modular and amenable to implementations. In addition, we proved that the decision procedure is in fact PSPACE-complete for several special cases that are meaningful in practice. Finally, we show that extending the decidable straight-line fragment with any of the integer constraints, character constraints, and constraints involving the $\indexof$ function, leads to the undecidability again. 

Our work in this paper clarified some fundamental issues around the $\replaceall$ function and provided a novel decision procedure which may lead to a string  solver in the near future that supports the $\replaceall$ function in its general form.